---
import "../styles/global.css";

interface Props {
  title?: string;
  description?: string;
  theme?: string;
}

const {
  title = "LACE | Long-Form Artifact Construction Engine",
  description = "Structured AI for serious documents.",
  theme = "midnight"
} = Astro.props;
---

<!doctype html>
<html lang="en" data-theme={theme}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
  </head>
  <body>
    <div id="google_translate_element" style="position:fixed;top:12px;right:12px;z-index:9999;"></div>
    <script is:inline type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({
          pageLanguage: 'en',
          includedLanguages: 'en,es',
          layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
        }, 'google_translate_element');
      }
    </script>
    <script is:inline type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <slot />
    <script is:inline>
      const revealTargets = document.querySelectorAll("[data-reveal]");
      if (revealTargets.length > 0) {
        const revealObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("is-visible");
                revealObserver.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.14, rootMargin: "0px 0px -8% 0px" }
        );
        revealTargets.forEach((target) => revealObserver.observe(target));
      }
    </script>
  </body>
</html>
